- var page = {}
- page.ogp = {}
- page.styles = []
- page.scripts = []
- page.requirejs = ""
- page.title           = "Default Title"
- page.keywords        = "keywords,keywords,keywords"
- page.description     = "Description"
- page.ogp.title       = "Default Title"
- page.ogp.site_name   = "Default Site Name"
- page.ogp.type        = "website"
- page.ogp.url         = "http://example.com/"
- page.ogp.image       = "http://example.com/img/ogp.png"
- page.ogp.description = "OGP Description"


mixin template()
  doctype 5
  //if lt IE 7
    <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="ja" prefix="og: http://ogp.me/ns# fb: http://www.facebook.com/2008/fbml">
  //if IE 7
    <html class="no-js lt-ie9 lt-ie8" lang="ja" prefix="og: http://ogp.me/ns# fb: http://www.facebook.com/2008/fbml">
  //if IE 8
    <html class="no-js lt-ie9" lang="ja" prefix="og: http://ogp.me/ns# fb: http://www.facebook.com/2008/fbml">
  <!--[if gt IE 8]><!-->
  html(class='no-js', lang='ja', prefix="og: http://ogp.me/ns# fb: http://www.facebook.com/2008/fbml")
    <!--<![endif]-->
    head
      meta(charset="UTF-8")
      title= page.title
      meta(name="viewport", content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no")
      meta(name="description", content=page.description)
      meta(name="keywords", content=page.keywords)
      meta(property="og:title", content=page.ogp.title)
      meta(property="og:site_name", content=page.ogp.site_name)
      meta(property="og:type", content=page.ogp.type)
      meta(property="og:url", content=page.ogp.url)
      meta(property="og:image", content=page.ogp.image)
      meta(property="og:description", content=page.ogp.description)
      +styles()
    body
      if block
        block
      else
        p
          | No content provided
      +scripts()
      +requirejs()
      +analysis()

mixin styles()
  link(rel="stylesheet", href=rootDir + "vendor/css/assets.css")

  - for (var i = 0; i < page.styles.length; i++)
    link(rel="stylesheet", href=page.styles[i] + ".css")


mixin scripts()
  - for (var i = 0; i < page.scripts.length; i++)
    script(src=page.scripts[i])


mixin requirejs()
  if page.requirejs !== ""
    if debug
      script(src=rootDir + "_config.js")
      script(src=rootDir + "vendor/assets/requirejs/js/require.js", data-main=page.requirejs + ".js")

    else
      script(src=rootDir + "vendor/js/assets.js")
      script(src=page.requirejs + ".js")

mixin analysis()
  // google analytics
  script(type="text/javascript").
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-00000000-0']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  // /google analytics
